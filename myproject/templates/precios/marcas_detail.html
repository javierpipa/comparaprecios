{% extends "base.html" %}
{% load static %}

{% block title %}{{ object.nombre|title }}{% endblock %}

{% block breadcrumbs %}
  {% if not is_popup %}
    {% include "template_breadcrums.html"  %}
  {% endif %}
{% endblock %}

{% block extrahead %}
    <meta property="product:brand" content="{{ object.nombre|title}}">

    <script>
        $( document ).ready(function() 
        {
            loadCarrito();
        })
    </script>
{% endblock %}

{% block content %}


<main id="main">
    <section id="featured-services" class="featured-services">
        <div class="container" data-aos="fade-up">
            <!-- <button id="toggle-column-button" class="btn btn-light align-middle btn-sm">Cambiar Vista</button> -->

<div class="row">
    {% for row in articulos_dict %}
        <div class="col-lg-6 ">
            <div class="row ">
                <div class="div-img col-sm-3 ">
                    <img class="rounded mx-auto d-block imageover" src="{{row.articulo.image1}}" alt="{{ row.vendidoen.site }}" >
                </div>
                <div class="col-sm-7 ">
                    <p class="fw-normal mb-1">
                        {{ row.articulo.marca|title }}
                    </p>
                    <p class="fw-bold mb-1">
                        {% if user.is_active and user.is_staff %}
                            <!-- {{ row.articulo.id }} <br/> -->
                        {% endif %}

                        <a  href='{% url "precios:detalle" row.articulo.slug %}'>
                            {% if row.articulo.nombre %}
                                {{ row.articulo.nombre|title }}
                            {% else %}
                                {{ row.articulo.grados2 }}°
                                {{ row.articulo.medida_cant }} {{ row.articulo.medida_um }}    
                            {% endif %}
                        </a>
                        {% if row.articulo.color %}
                            <span class="badge bg-dark">Color: {{ row.articulo.color }}</span>
                        {% endif %}
                    </p>
                    {% if row.articulo.unidades > 1 %}
                        <p class="text-muted mb-0"><span class="badge bg-dark">Unidades: {{ row.articulo.unidades }}</span></p>
                    {% endif %}
                    <p class="text-muted mb-0">
                        <span class="badge bg-secondary">
                            {% if row.articulo.envase != None %}
                                {{ row.articulo.envase }}
                            {% endif %}
                        </span>
                        {% if row.articulo.grados2 %}
                            <span class="badge bg-danger">{{ row.articulo.grados2 }}°</span>&nbsp;
                        {% endif %}
                        {% if row.articulo.medida_cant %}
                            <span class="badge bg-secondary">{{ row.articulo.medida_cant }} {{ row.articulo.medida_um }}</span>
                        {% endif %}
                    </p>
                    {% if row.articulo.ean_13 %}
                        <p class="text-muted mb-0">{{ row.articulo.ean_13}} </p>
                    {% endif %}
                    {{ row.dimension }}
                </div>
                <div class="col-sm-2 ">
                    {%  include "precios/includes/boton_add_product.html" with id_prod=row.articulo.pk %}
                </div>
            </div>
            <ol class="list-group list-group list-group-numbered" >
                {% for vendedor in row.detalle %}
                    <li class="list-group-item d-flex justify-content-start align-items-start" >
                        {% include "precios/includes/vendedor_detalle.html" %}
                    </li>
                {% endfor %}
            </ol>

        </div>
    {% endfor %}
</div>
</div>
</section>
</main>
<script>
    document.getElementById('toggle-column-button').addEventListener('click', function() {
        var elements = document.querySelectorAll('.row > div');
        elements.forEach(function(element) {
            var cardElement = element.querySelector('.card');
            if (cardElement) {
                if (element.classList.contains('col-12')) {
                    element.className = 'col-xxl-2 col-xl-3 col-lg-4 col-md-4 col-sm-6 col-6';
                    cardElement.classList.remove('single-column-view');
                } else {
                    element.className = 'col-12';
                    cardElement.classList.add('single-column-view');
                }
            }
        });
    });
    
    </script>
    
    <style>
        .card {
            transition: all 0.3s ease;
        }
    
        .single-column-view .card {
            min-height: 10rem; /* Ajusta este valor según tus preferencias */
        }
        .card {
            padding: 1rem; /* Ajusta este valor según tus preferencias */
        }
    
    </style>
{% endblock %}

{% block pagination %}
  {% include "paginacion.html" %}
{% endblock %}  

{% block footer %}
  {% include "footer.html" %}
{% endblock %}